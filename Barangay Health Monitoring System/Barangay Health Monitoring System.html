<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Barangay Health Monitoring System</title>
  <style>
     body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background-image: url('https://jefmenguin.com/wp-content/uploads/2023/12/barangay.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: blur(5px) brightness(0.6);
  z-index: -1;
}

    h1 {
  text-align: center;
  color: #fdffff;
  font-size: 45px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  text-shadow:
    -3px -1px 0 #00838f,
     3px -1px 0 #00838f,
    -3px  1px 0 #00838f,
     3px  1px 0 #00838f;
}

    h2 {
      text-align: center;
      color: #feffff; 
      font-size: 40px;
      display: none;
      margin-top: 40px;
      text-shadow:
    -3px -1px 0 #00838f,
     3px -1px 0 #00838f,
    -3px  1px 0 #00838f,
     3px  1px 0 #00838f;
    }

    form {
      max-width: 1000px;
      margin: 0 auto;
      background-color: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 50, 50, 0.1);
    }

    label {
      font-size: 19px;
      display: block;
      margin-top: 10px;
      font-weight: bold;
      color: #003c4d;
    }

    input, select, textarea, button {
      font-size: 17px;
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #a0cfcf;
    }

    input[type="radio"], input[type="checkbox"] {
      font-size: 17px;
      width: auto;
      margin-right: 6px;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 8px;
      margin-bottom: 12px;
    }

    button {
      background-color: #00838f; 
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: 0.3s ease;
      width: 100%;
      padding: 10px;
      margin-top: 20px;
      border-radius: 6px;
      font-size: 16px;
    }

    button:hover {
      background-color: #005f66;
    }

    .button-container {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    #exportBtn {
      background-color: #00838f;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: 0.3s ease;
      padding: 12px 28px;
      font-size: 17px;
      border-radius: 6px;
      min-width: 300px;
    }

    #exportBtn:hover {
      background-color: #005f66;
    }

    table {
      font-size: 20px;
      width: 100%;
      margin: 30px auto;
      border-collapse: collapse;
      background-color: #f0fff8;
    }

    th {
      background-color: #b2dfdb;
      padding: 14px;
      text-align: left;
      font-weight: bold;
      color: #003c4d;
      border: 2px solid #a0ccc9;
    }

    td {
      padding: 12px;
      border: 2px solid #b2dfdb;
      text-align: left;
      color: #003c4d;
    }

    tr:hover {
      background-color: #d9faff;
    }

    @media print {
      form, button {
        display: none;
      }

      table {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <h1>Barangay Health Monitoring System</h1>

  <form id="healthForm">
    <label>Full Name:</label>
    <input type="text" required name="fullName">

    <label>Age:</label>
    <input type="number" required name="age" min="1" max="120">

    <label>Gender:</label>
    <input type="radio" required name="gender" value="Male"> Male
    <input type="radio" required name="gender" value="Female"> Female

    <label>Address:</label>
    <select name="address" required>
      <option value="" disabled selected>Select your area</option>
      <option value="Area 1">Area 1</option>
      <option value="Area 2">Area 2</option>
      <option value="Area 3">Area 3</option>
      <option value="Area 4">Area 4</option>
      <option value="Area 5">Area 5</option>
      <option value="Area 6">Area 6</option>
    </select>

    <label>Vaccination Status:</label>
    <select name="vaccination" required>
      <option value="" disabled selected>Select vaccination status</option>
      <option value="✔️ Vaccinated">✔️ Vaccinated</option>
      <option value="❌ Unvaccinated">❌ Unvaccinated</option>
    </select>

    <label>Recent Symptoms:</label>
    <div class="checkbox-group">
      <label><input type="checkbox" name="symptoms" value="Fever"> Fever</label>
      <label><input type="checkbox" name="symptoms" value="Cough"> Cough</label>
      <label><input type="checkbox" name="symptoms" value="Fatigue"> Fatigue</label>
      <label><input type="checkbox" name="symptoms" value="Sore throat"> Sore throat</label>
      <label><input type="checkbox" name="symptoms" value="Loss of taste or smell"> Loss of taste or smell</label>
      <label><input type="checkbox" name="symptoms" value="Nausea or vomiting"> Nausea or vomiting</label>
      <label><input type="checkbox" name="symptoms" value="Muscle or body aches"> Muscle or body aches</label>
      <label><input type="checkbox" name="symptoms" value="Shortness of breath or difficulty breathing"> Shortness of breath or difficulty breathing</label>
      <label><input type="checkbox" name="symptoms" value="No current symptoms"> No current symptoms</label>
    </div>

    <label>Last Medical Checkup:</label>
    <input type="date" required name="checkup">

    <label>Additional Health Notes:</label>
    <textarea name="notes" rows="4"></textarea>

    <button type="submit">Submit Survey</button>
  </form>

  <h2 id="submittedTitle">Submitted Entries:</h2>

  <table id="resultsTable" style="display:none;">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Address</th>
        <th>Vaccination</th>
        <th>Symptoms</th>
        <th>Checkup Date</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="button-container">
    <button id="exportBtn" style="display:none;">Export to Excel</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <script>
    const form = document.getElementById("healthForm");
    const resultsTable = document.getElementById("resultsTable");
    const submittedTitle = document.getElementById("submittedTitle");
    const tbody = resultsTable.querySelector("tbody");
    const exportBtn = document.getElementById("exportBtn");

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const data = new FormData(form);
      const name = data.get("fullName");
      const age = data.get("age");
      const gender = data.get("gender");
      const address = data.get("address");
      const vaccination = data.get("vaccination");
      const checkup = data.get("checkup");
      const notes = data.get("notes");

      const symptoms = [];
      form.querySelectorAll("input[name='symptoms']:checked").forEach(symptom => {
        symptoms.push(symptom.value);
      });

      const row = tbody.insertRow();
      row.innerHTML = ` 
        <td>${name}</td>
        <td>${age}</td>
        <td>${gender}</td>
        <td>${address}</td>
        <td>${vaccination}</td>
        <td>${symptoms.join(", ")}</td>
        <td>${checkup}</td>
        <td>${notes}</td>
      `;

      resultsTable.style.display = "table";
      submittedTitle.style.display = "block";
      exportBtn.style.display = "block";
      alert("Survey submitted successfully!");
      form.reset();
    });

    exportBtn.addEventListener("click", function () {
      const wb = XLSX.utils.book_new();
      const ws = XLSX.utils.table_to_sheet(resultsTable);
      XLSX.utils.book_append_sheet(wb, ws, "Survey Results");
      XLSX.writeFile(wb, "Barangay_Health_Survey.xlsx");
    });
  </script>

</body>
</html>
