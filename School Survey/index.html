<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">
    <title>School Classroom Feedback Survey</title>
</head>
<body>
    <header class="expanding-header">
        <div class="top-row">
            <h1>School Classroom Feedback Survey ✏️⭐</h1>
            <button id="toggle-filter">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
                <path d="M18.75 12.75h1.5a.75.75 0 0 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM12 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 6ZM12 18a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 12 18ZM3.75 6.75h1.5a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 0 0 0 1.5ZM5.25 18.75h-1.5a.75.75 0 0 1 0-1.5h1.5a.75.75 0 0 1 0 1.5ZM3 12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12ZM9 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM12.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM9 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" />
            </svg>        
            Filter</button>
        </div>
      
        <div class="filter-controls hidden" id="filter-controls">
            <label for="filter-items">Filter Items:</label>
            <select name="filter-items" id="filter-items">
                <option value="">Show All</option>
                <optgroup label="Subjects">
                    <option value="" disabled selected hidden>-- Select --</option>
                    <option value="english">English</option>
                    <option value="filipino">Filipino</option>
                    <option value="mathematics">Mathematics</option>
                    <option value="mapeh">MAPEH</option>
                    <option value="science">Science</option>
                    <option value="araling panlipunan">Araling Panlipunan</option>
                    <option value="edukasyon sa pagpapakatao">Edukasyon sa Pagpapakatao</option>
                </optgroup>
                <optgroup label="Rating">
                    <option value="1">⭐</option>
                    <option value="2">⭐⭐</option>
                    <option value="3">⭐⭐⭐</option>
                    <option value="4">⭐⭐⭐⭐</option>
                    <option value="5">⭐⭐⭐⭐⭐</option>
                </optgroup>
            </select>
            <button id="apply-filter">Apply Filter</button>
        </div>
    </header>

    <form id="feedback-form" action="#" method="post">
        <div class="container">
            <div class="sub-container" id="student-info">
                <h2>Student Info</h2>

                <label for="fullname">Full Name</label><br>
                <input type="text" id="fullname" name="fullname" required><br>

                <label for="gradesection">Grade & Section</label><br>
                <select name="gradesection" id="gradesection" required>
                    <option value="" disabled selected hidden>-- Select --</option>
                    <option value="Grade 7-A">Grade 7-A</option>
                    <option value="Grade 7-B">Grade 7-B</option>
                    <option value="Grade 7-C">Grade 7-C</option>
                    <option value="Grade 7-D">Grade 7-D</option>
                    <option value="Grade 7-E">Grade 7-E</option>
                    <option value="Grade 8-A">Grade 8-A</option>
                    <option value="Grade 8-B">Grade 8-B</option>
                    <option value="Grade 8-C">Grade 8-C</option>
                    <option value="Grade 8-D">Grade 8-D</option>
                    <option value="Grade 8-E">Grade 8-E</option>
                </select>
            </div>

            <div class="sub-container" id="feedback">
                <h2>Feedback</h2>

                <label for="subject">Subject</label><br>
                <select name="subject" id="subject" required>
                    <option value="" disabled selected hidden>-- Select --</option>
                    <option value="English">English</option>
                    <option value="Filipino">Filipino</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="MAPEH">MAPEH</option>
                    <option value="Science">Science</option>
                    <option value="Araling Panlipunan">Araling Panlipunan</option>
                    <option value="Edukasyon sa Pagpapakatao">Edukasyon sa Pagpapakatao</option>
                </select><br>

                <label class="rating-label">Teacher Rating</label>
                <div class="rating">
                    <input type="radio" name="rating" id="star5" value="5">
                    <label for="star5" title="5 Stars">★</label>
                    <input type="radio" name="rating" id="star4" value="4">
                    <label for="star4" title="4 Stars">★</label>
                    <input type="radio" name="rating" id="star3" value="3">
                    <label for="star3" title="3 Stars">★</label>
                    <input type="radio" name="rating" id="star2" value="2">
                    <label for="star2" title="2 Stars">★</label>
                    <input type="radio" name="rating" id="star1" value="1" required>
                    <label for="star1" title="1 Star">★</label>
                </div>

                <label for="favlesson">Favorite Lesson</label><br>
                <input type="text" id="favlesson" name="favlesson" required>

                <br><label for="suggestions">Suggestions for Improvement</label>
                <textarea id="suggestions" name="suggestions" rows="5" cols="50"></textarea>
            </div>

            <label class="anonymous">Submit Anonymously
                <input type="checkbox">
                <span class="checkmark"></span>
            </label>
            
            <div class="submit-container">
                <button type="submit">Submit Feedback</button>
            </div>
        </div>
    </form>

    <div class="feedback-table-container">
        <div class="sub-feedback-table-container">
            <h2>Table</h2>
            <div class="table-scroll">
                <table class="feedback-table">
                    <thead>
                        <tr>
                            <th>Full Name</th>
                            <th>Grade & Section</th>
                            <th>Subject</th>
                            <th>Rating</th>
                            <th>Favorite Lesson</th>
                            <th>Suggestions</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    

    <script>
        const toggleBtn = document.getElementById('toggle-filter');
        const filterPanel = document.getElementById('filter-controls');
        const applyFilterBtn = document.getElementById('apply-filter');
        const filterSelect = document.getElementById('filter-items');
        const form = document.getElementById('feedback-form');
        const tableBody = document.querySelector('.feedback-table tbody');
      
        toggleBtn.addEventListener('click', () => {
          filterPanel.classList.toggle('hidden');
        });

        form.addEventListener('submit', function (e) {
            e.preventDefault();
        
            const fullname = document.getElementById('fullname').value || "Anonymous";
            const gradesection = document.getElementById('gradesection').value;
            const subject = document.getElementById('subject').value;
            const rating = document.querySelector('input[name="rating"]:checked')?.value || "0";
            const favlesson = document.getElementById('favlesson').value;
            const suggestions = document.getElementById('suggestions').value.trim() || "N/A";
            const isAnonymous = form.querySelector('.anonymous input').checked;

            const stars = '⭐'.repeat(parseInt(rating));

            const displayName = isAnonymous ? "Anonymous" : fullname;

            const newRow = document.createElement('tr');
            newRow.setAttribute('data-subject', subject.toLowerCase().replace(/\s+/g, ''));
            newRow.setAttribute('data-rating', rating);
            newRow.innerHTML = `
                <td>${displayName}</td>
                <td>${gradesection}</td>
                <td>${subject}</td>
                <td>${stars}</td>
                <td>${favlesson}</td>
                <td>${suggestions}</td>
            `;
            
            tableBody.appendChild(newRow);

            form.reset();
        })

        applyFilterBtn.addEventListener('click', () => {
            const selectedFilter = filterSelect.value.toLowerCase().replace(/\s+/g, '');
            const rows = tableBody.querySelectorAll('tr');
            
            rows.forEach(row => {
                const subject = row.getAttribute('data-subject');
                const rating = row.getAttribute('data-rating');

                const isMatch = subject === selectedFilter || rating === selectedFilter;
                row.style.display = isMatch || selectedFilter === "" ? '' : 'none';
            });
        });
    </script>
</body>
</html>